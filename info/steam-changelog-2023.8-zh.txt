tModLoader 2023年10月的稳定版已更新！

在过去的一个月里，tModLoader 团队一直忙于修复 bug 和添加新功能。像往常一样，本月的更新包含了许多 bug 修复；更特别的是，它也为模组制作者带来了许多新功能。

新的功能包括模组建筑工具开关，模组表情气泡，堆石器支持，NPC buff 免疫系统重做，存储世界数据的新方式和模组制作者们期待已久的额外跳跃 API。这些功能经由模组制作者们的贡献才得以实现，我们鼓励模组作者继续改进 tModLoader。代码上的改动能让模组制作者们轻松完成之前极其复杂的实现。

希望玩家们可以给模组制作者一些时间来更新和测试模组，尤其是当他们的模组刚好需要适配新改动时。

我们期待看到模组利用起这些新功能。如果你有任何问题，请别犹豫，看看[url=https://github.com/tModLoader/tModLoader/wiki/Basic-tModLoader-Usage-FAQ]常见问题解答[/url]或上[url=https://discord.com/invite/tmodloader]我们的 Discord[/url] 寻求帮助。
（当然，对于不便上 GitHub、Discord 或阅读英文的中文读者，[url=https://fs49.org/sample-page/]FS49[/url] 和其他中文论坛/群组或许能起到帮助。）

[h1]重要改动[/h1]

下面是本次更新中最值得注意的改动。提示：模组作者可以在[url=https://github.com/tModLoader/tModLoader/wiki/Update-Migration-Guide#v202308]模组更新指南[/url]中了解如何在运行 tModPorter 后完成余下的修改。

[h3][b][url=https://github.com/tModLoader/tModLoader/pull/3552]额外跳跃 API[/url][/b] by [b]absoluteAquarius[/b][/h3]
[quote]• 新增了供模组添加额外跳跃的 API。
• 额外跳跃此前很难实现。
• 更多信息参见[url=https://github.com/tModLoader/tModLoader/pull/3552]额外跳跃 API 的 PR [/url]和[url=https://github.com/tModLoader/tModLoader/wiki/Update-Migration-Guide#extra-jump-api]模组更新指南[/url]。

[b]更新提示：[/b]如果你之前用了自己的实现，现在换成 tModLoader 的。[url=https://github.com/tModLoader/tModLoader/wiki/Update-Migration-Guide#extra-jump-api]模组更新指南[/url] 有更多关于代码修改的信息。
[/quote]
[h3][b][url=https://github.com/tModLoader/tModLoader/pull/3746]添加模组世界数据头[/url][/b] by [b]Chicken-Bones[/b][/h3]
[quote]• 模组的世界数据现在可以存进 .twld 文件中的“数据头”中。无需将整个文件反序列化即可读取数据头，且可以在选择世界和原版世界加载时获取。
• 世界上次游玩时开启的模组现在会在世界选择菜单中显示，就像人物选择菜单那样。
• 世界生成时开启的模组及其版本也会存入数据头中。当然了，只有本次更新后生成的世界才有。
[/quote]
[h3][b][url=https://github.com/tModLoader/tModLoader/pull/2918]模组表情气泡[/url][/b] by [b]-Cyril-[/b][/h3]
[quote]• 现在模组可以添加表情气泡了。
• 模组还可以调整 NPC 选择表情的算法。
• 示例模组（ExampleMod）展示了一些自定义表情和表情生成。
[/quote]
[h3][b][url=https://github.com/tModLoader/tModLoader/pull/3453]重做 NPCID.Sets.DebuffImmunitySets[/url][/b] by [b]JavidPack[/b][/h3]
[quote]• 重做了 NPC 的 buff 免疫系统以增强其功能性和便捷性。
• NPCID.Sets.DebuffImmunitySets 被替换为 NPCID.Sets.SpecificDebuffImmunity、NPCID.Sets.ImmuneToAllBuffs 和 NPCID.Sets.ImmuneToRegularBuffs 以简化代码。
• 以数组 BuffID.Sets.GrantImmunityWith 和对应的方法实现了 buff 免疫继承。

[b]更新提示：[/b] 如果你的模组有 NPC 或者其他跟 buff 免疫相关的东西，你得更新相关代码。更多信息参见[url=https://github.com/tModLoader/tModLoader/pull/3453]模组更新指南的对应章节[/url]。
模组还应当使用新的 buff 免疫继承系统增强兼容性。
[/quote]
[h3][b][url=https://github.com/tModLoader/tModLoader/pull/3731]模组建筑工具开关[/url][/b] by [b]xKirtle[/b][/h3]
[quote]• 现在模组可以添加建筑工具开关，就是背包左上侧的物块交换、电线可见性之类的小图标。

[b]Porting Notes: [/b]如果你之前自己实现了建筑工具开关，现在换成 tModLoader 的。
[/quote]
[h3][b][url=https://github.com/tModLoader/tModLoader/pull/3568]堆石器支持[/url][/b] by [b]GeorgeFeldy[/b][/h3]
[quote]• 现在模组可以为堆石器添加物块。
[/quote]

[h1]Bug 修复[/h1]
[h2]游戏内容修复[/h2]
[b]Rijam[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3814]修复月球领主宝藏袋武器池不全的问题[/url]
[b]Chicken-Bones[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3808]修复远程客户端多次播放物品使用音效的问题[/url]
[b]JavidPack[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3800]在使用物品的第一帧调用 ItemCheck_ApplyManaRegenDelay[/url]
[b]Chicken-Bones[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3796]为爆炸物添加 ProjectileID.Sets.PlayerHurtDamageIgnoresDifficultyScaling[/url]
[b]Chicken-Bones[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3795]修复工具速度受近战速度影响的问题[/url]
[b]Cerbrus[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3576]在 ProcessHitAgainstNPC 中检查 UseStandardCritCalcs[/url]

[h2]游戏体验和其他修复[/h2]
[b]Cerbrus[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3628]自动启用被依赖的模组[/url]
[b]JavidPack[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3841]用本地 dotnet 启动时禁用版本前移[/url]
[b]Chicken-Bones[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3804]允许连续使用物品时用快捷键切换物品和进行智能选择[/url]
[b]Chicken-Bones[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3843]修复并改进连续使用物品时的智能选择[/url]
[b]Chicken-Bones[/b] - [url=https://github.com/tModLoader/tModLoader/commit/e64e561f4a4a9b890df8330dadee366882c1493c] 修复 PickupItemIntoMouse 中被分离物品也继承收藏状态的问题[/url]
[b]blushiemagic[/b] - [url=https://github.com/tModLoader/tModLoader/commit/1ccac010fc2a8d43051ccd3dc5e687c4b90b6dda]更新 HER0zero 和 Mayne 的赞助者套装；调整赞助者和开发者套装的掉率[/url]
[b]JavidPack[/b] - [url=https://github.com/tModLoader/tModLoader/commit/2091d8d2448fc8f55c368eb5ac6d3701ab56e5ce]修复命令行 -host 参数无效的问题[/url]
[b]JavidPack[/b] - [url=https://github.com/tModLoader/tModLoader/commit/3c4edc60a95c70c73760b28241237cfce6b62a1d]为翻译模组添加特殊图标[/url]
[b]Chicken-Bones[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3844]添加默认的通用 SDL 驱动，错误报告和命令行参数[/url]
[b]Chicken-Bones[/b] - [url=https://github.com/tModLoader/tModLoader/commit/eb3a3df49ccdefb72347b2cd018fc93b563c39fd]添加 Silence SteelSeries 连接错误和 HTTP 在异步线程上失败的日志条目[/url]

[h2]API 修复与改动[/h2]
[b]stormytuna[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3835]补全 TooltipLine 文档的条目[/url]
[b]Lion8cake[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3606]Don't dig up / Remix 世界中神圣地形的生成置入“Hardmode Good”GenPass 中。[/url]
[b]Destructor_Ben[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3385]添加使物品射击时不带动玩家转向的字段（原版光束剑）[/url]
[b]Chicken-Bones[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3805]添加 useTurnOnAnimationStart 来重现游戏早期武器的转向行为[/url]
[b]direwolf420[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3616]模组马桶也可以喷屎了[/url]
[b]stormytuna[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3759]添加 ModPlayer.OnPickup[/url]
[b]JavidPack[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3770]将 (Mod|Global)Projectile.Kill 重命名为 OnKill[/url]
[b]BasicallyIAmFox[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3761]添加数组 ItemID.Sets.IsSpaceGun 以便使物品归为/不归为太空枪[/url]
[b]BasicallyIAmFox[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3642]允许隐藏 GenPass 实例以增强兼容性[/url]
[b]BasicallyIAmFox[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3641]允许隐藏 TooltipLine 实例以增强兼容性[/url]
[b]Tyfyter[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3634]Player.shimmerImmune 的访问修饰符改为 public[/url]
[b]Cerbrus[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3595] 添加 ModTile.IsTileBiomeSightable 以决定物块是否因生物群落视觉药水而高亮显示[/url]
[b]direwolf420[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3558] 添加 NPCID.Sets.BelongsToInvasion（属于入侵事件）[/url]
[b]Destructor_Ben[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3710]更好的模组改动说明[/url]
[b]JavidPack[/b] - [url=https://github.com/tModLoader/tModLoader/commit/1352e4b5c8109de9f86cc20735bceb91ebdb5198]方法 ShakeTree 的参数 createLeaves 现在默认为 True，符合 1.4.4 的行为[/url]
[b]Destructor_Ben[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3604]允许调整 InfoDisplay 的阴影颜色[/url]
[b]JavidPack[/b] - [url=https://github.com/tModLoader/tModLoader/commit/3ca9bf16a3722c35ea86377b7a28f4456b072743]以 GlobalInfoDisplay.ModifyDisplayParameters 取代 ModifyDisplayValue，ModifyDisplayName 和 ModifyDisplayColor（后三者被标记为过时）[/url]
[b]JavidPack[/b] - [url=https://github.com/tModLoader/tModLoader/commit/c6afafcf9f803292d5c7a8e63ac88d5404f74327]恢复 ModConfig 和 PrefixDefinition 的功能[/url]
[b]direwolf420[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3840]修复公主不使用应有的本地化键的问题[/url]
[b]JavidPack[/b] - [url=https://github.com/tModLoader/tModLoader/commit/aee3e5ece65982d28dd0e4c5930e4fbc501e3882]文件 TranslationsNeeded.txt 现可用于追踪翻译进度[/url]

[h2]示例模组（ExampleMod）[/h2]
[b]VaemaVoid[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3783]更新 ExampleStaff（示例法杖）[/url]
[b]direwolf420[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3477]添加 ExampleMinecart（示例矿车）[/url]
[b]VaemaVoid[/b] - [url=https://github.com/tModLoader/tModLoader/pull/3646] 更新 ExampleLastPrism（示例最终棱镜）[/url]

[h1]本地化[/h1]
[b]RazzSG and Blueberryy[/b] - 俄文
[b]Pixelnando[/b] - [url=][/url] - 巴西葡萄牙文
[b]Solxan[/b] - [url=https://github.com/tModLoader/tModLoader/commit/dbd01317c631964829f6efb76c733abbd480cfd2]为 Steam 创意工坊和商店页面添加本地化支持[/url]

我们刚刚开始做商店页面和创意工坊标签的本地化。同时我们仍然缺少一些语言的游戏内翻译。如果你有兴趣翻译这些内容，请在[url=https://discord.gg/tmodloader] Discord [/url]联系我们，了解贡献翻译的事项，或参照 [url=https://github.com/tModLoader/tModLoader/wiki/Contributing-Localization#tmodloader-translations]tModLoader wiki[/url] 上的指示。
